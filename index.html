<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h1>貸款計算器</h1>
    <from>
        <label for="">計算方式:</label>
        <input type="radio" id="PrincipalPayment" name="repayment" checked>本金攤還
        <input type="radio" id="InterestPayment" name="repayment">本息攤還
        <br>
        <label for="loanAmount">貸款金額:</label>
        <input type="number" id="loanAmount" name="loanAmount" placeholder="請輸入金額" value="1000">&nbsp;元<br>
        <label for="InterestRate">貸款利率:</label>
        <input type="number" id="InterestRate" name="InterestRate" placeholder="請輸入利率" value="3.5">&nbsp;%<br>
        <label for="loanYear">貸款期數:</label>
        <select name="loanYear" id="loanYear">
            <option value="3">3</option>
            <option value="5">5</option>
            <option value="7" selected>7</option>
            <option value="10">10</option>
            <option value="20">20</option>

        </select>&nbsp;年

        <br><br>
        <input type="button" value="計算" onclick="roanCalc()"></input>


    </from>
    <ul id="result">

    </ul>
    <table id="resultTable" border="1">
        <thead>
            <tr>
                <th>期別</th>>
                <th>本金</th>>
                <th>利息</th>>
                <th>本利和</th>>
                <th>餘額</th>>
            </tr>
        </thead>
        <tbody>


        </tbody>

    </table>





    <script>
        const loanAmountEl = document.querySelector("#loanAmount");
        const InterestRateEl = document.querySelector("#InterestRate");
        const loanYearEl = document.querySelector("#loanYear");
        const PrincipalPaymentEl = document.querySelector("#PrincipalPayment");
        const resultEl = document.querySelector("#result");

        const tableTbodyE1 = document.querySelector("resultTable>tbody")




        function roanCalc() {
            //取得貸款金額/利率/年份
            let loanAmount = loanAmountEl.value;
            let InterestRate = InterestRateEl.value;
            let loanYear = loanYearEl.value;
            let PrincipalPayment = PrincipalPaymentEl.checked;
            console.log(loanAmount, InterestRate, loanYear, PrincipalPayment);

            let amount = loanAmount;
            let months = loanYear * 12;
            let monthRate = InterestRate / 100 / 12;
            let monthPay = parseInt(amount / months);

            let resultPayment = []

            console.log(amount, months, monthRate, monthPay);



            for (let i = 0; i < months; i++) {
                let interest = Math.round(loanAmount * monthRate)
                amount -= monthPay

                if (i == months - 1) {
                    resultPayment.push([i + 1, monthPay + amount, interest, monthPay + interest + amount, 0]);


                }
                else {
                    resultPayment.push([i + 1, monthPay, interest, monthPay + interest, amount]);


                }


            }

            console.log(resultPayment);

        }

        function drawTable(resulPayment) {
            console.log(tableTbodyE1, resulPayment);
            let tableHtml = "";
            //<tr></tr>
            for (let i = 0; i < resulPayment.length; j++) {
                tableHtml += "<tr>"
                for (let j = 0; j < resulPayment[i].length; j++) {
                    //console.log(resulPayment[i][j]);
                    tableHtml += `<td>${resulPayment[i][j]}</td>`

                }
                tableHtml += "</tr>";

            }
            tableTbodyE1.innerHTML = tableHtml;

        }

    </script>

</body>

</html>